CONTRACT_TYPE
{
	name = CrewRotationStation
	title = Rotate the Crew of @/targetVessel1
	genericTitle = Rotate the Crew of Your Space Station
	group = EarthSpaceStation
	
	description = Our crew has been up on our Space Station for a extended stay. We want to continue our research, but need to bring that crew home. Send a new crew to your Space Station and bring the existing crew home.
	synopsis = Rotate the Crew of @/targetVessel1
	completedMessage = Mission Success! Our new crew has settled into the station and will continue our research and the old crew has returned home safely.

	sortKey = 1503

	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 0
	maxSimultaneous = 1
	deadline = 0

	targetBody = @/targetBody1

	prestige = Trivial//Significant //Exceptional
	advanceFunds = @rewardReputation * @SpacelinesContracts:KerbucksTrivial
	rewardFunds = @advanceFunds * @SpacelinesContracts:KerbucksRewardTrivial
	failureFunds = @advanceFunds * 1.1
	rewardScience = 0
	rewardReputation = 50
	failureReputation = @rewardReputation * 0.5 // was @rewardReputation

	// ------------------------------------------------------------------------
	// Requirements
	// ------------------------------------------------------------------------

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = first_spaceStation
	}

	// ************ DATA ************

	DATA
	{
		type = Vessel
		requiredValue = true
		targetVessel1 = AllVessels().Where(v => v.VesselType() == Station && v.CrewCount()>0).Random()
		title = Must have a station with crew on board
	}
	DATA
	{
		type = CelestialBody
		requiredValue = true
		targetBody1 = @/targetVessel1.CelestialBody()
		hidden = true
		title = Get the target body
	}
	DATA
	{
		type = List<Kerbal>
		targetKerbals = @targetVessel1.Crew()
		hidden = true
		title = Get your list of Kerbals to return
	}

	// ------------------------------------------------------------------------
	// Parameters
	// ------------------------------------------------------------------------

	PARAMETER
	{
		name = SSCrewRotation
		type = VesselParameterGroup
		title = Send up a new crew

		PARAMETER
		{
			name = Crewmembers
			type = HasCrew
			minCrew = Random(1, 3)
			maxCrew = 4
			title = Have at least @minCrew crewmembers on board
			hideChildren = true
			disableOnStateChange = true
		}
		PARAMETER
		{
			name = DockingPort
			type = PartValidation
			partModuleType = Dock
			minCount = 1
			title = Have at least 1 docking port
			hideChildren = true
			disableOnStateChange = true
		}
		PARAMETER
		{
			name = DockWithStation
			type = Docking
			vessel = @/targetVessel1
			title = Dock @/targetVessel1
			hideChildren = true
			disableOnStateChange = true
		}
	}

	PARAMETER
	{
		name = SSCrewReturn
		type = VesselParameterGroup
		title = Bring the crew home!

		PARAMETER
        {
            name = ReturnHome
            type = ReturnHome
            title = Recover the spaceship and its crew intact
        }

		PARAMETER
		{
			name = RecoverKerbal
			type = RecoverKerbal
			kerbal = @/targetKerbals
		}
	}
}