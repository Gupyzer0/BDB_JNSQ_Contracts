CONTRACT_TYPE
{
    name = Early-Mach2
	title = Reach Mach 2
	group = CrewedRecords

	description = Mach Kerman believes with current liquid-fueled rocket technology, that it's possible to exceed Mach 2, which is twice the speed of sound. Doing so would bring us another step closer to spaceplane development. He wants you to take an airplane to an @/PrettyAltRange and see if you can exceed @/PrettySpeed safely in level controlled flight.
	synopsis = Launch an airplane from the runway, fly at an @/PrettyAltRange, exceed @/PrettySpeed in level flight for 5 seconds, and then land back at KSC safely.
	notes = Going Mach 1 was cool. Going Mach 2 will be even cooler. Unfortunately, scientists at KSC predict it will also lead to twice the number of required autographs when you get back.
	completedMessage = Wow! You did it! You reached Mach 2, and came back safely!\n\nInigma passed your flight data to Gene Kerman at the Kerbal Space Program, and Gene says he's very proud of your accomplishments, and that he's very glad to have you working together.

    autoAccept = false
	cancellable = true
	declinable = false
	
	targetBody = HomeWorld()

	// Can only have one active
	maxCompletions = 1
	maxSimultaneous = 1

	// Contract rewards

	prestige = Exceptional
	advanceFunds = @rewardReputation * @SpacelinesContracts:KerbucksExceptional
	rewardFunds = @advanceFunds * @SpacelinesContracts:KerbucksRewardExceptional
	failureFunds = @advanceFunds * 1.1
	rewardReputation = 25
	failureReputation = @rewardReputation * 0.5 // was @rewardReputation

    REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract

		contractType = Early-Mach1
		minCount = 1
	}

	DATA
	{
		type = string
		craft = KPlanesMach2
	}

	DATA
	{
		type = double
		AltMin = Round(@SpacelinesContracts:TroposphereLow * 1000.0)
		ScaledAltMin = Round(@/AltMin / 1000.0)
		title = Minimum altitude
	}

	DATA
	{
		type = string
		DescAltMin = " (Troposphere Low)"
		title = Minimum altitude
	}

	DATA
	{
		type = string
		PrettyAltMin = @/ScaledAltMin.ToString("#,# km")
		title = Minimum altitude
	}

	DATA
	{
		type = double
		AltMax = Round(@SpacelinesContracts:StratosphereHigh * 1000.0)
		ScaledAltMax = Round(@/AltMax / 1000.0)
		title = Maximum altitude
	}

	DATA
	{
		type = string
		DescAltMax = " (Stratosphere High)"
		title = Maximum altitude
	}

	DATA
	{
		type = string
		PrettyAltMax = @/ScaledAltMax.ToString("#,# km")
		title = Maximum altitude
	}

	DATA
	{
		type = string
		PrettyAltRange = altitude between @/PrettyAltMin@/DescAltMin and @/PrettyAltMax@/DescAltMax
		title = Range for altitude 
	}

	DATA
	{
		type = double
		Speed = Round(@SpacelinesContracts:Mach2 * 1.0)
		ScaledSpeed = Round(@/Speed / 1.0)
		title = Speed
	}

	DATA
	{
		type = string
		DescSpeed = " (Mach2)"
		title = Speed
	}

	DATA
	{
		type = string
		PrettySpeed = @/ScaledSpeed.ToString("#,# m/s")
		title = Speed
	}

	DATA
	{
		type = string
		PrettySpeedRange = speed of at least @/PrettySpeed@/DescSpeed
		title = Range for speed 
	}

//PARAMETERS FOR CONTRACT COMPLETION

//Craft definition
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = Your aircraft must

		define = @/craft
		dissassociateVesselsOnContractCompletion = true

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = have a certified pilot

			trait = Pilot
			minCrew = 1

			disableOnStateChange = false
			hideChildren = true

		}

		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = have wings

			category = Aero

			disableOnStateChange = false
			hideChildren = true

		}

		PARAMETER
		{
			name = All
			type = All
			title = have air breathing engines and/or rockets

			PARAMETER
			{
				name = PartValidation
				type = PartValidation
				title = not have any solid rocket engines

				NONE
				{
					MODULE
					{
						EngineType = SolidBooster
					}

				}

				disableOnStateChange = false
				hideChildren = true

			}

			disableOnStateChange = false

		}

		disableOnStateChange = false

	}

//Contract Goals
	PARAMETER
	{
		name = All
		type = All
		title = achieve a maximum airspeed of @/PrettySpeed

		PARAMETER
		{
			name = VesselParameterGroup
			type = VesselParameterGroup
			title = fly at an @/PrettyAltRange
	
			vessel = @/craft
	
			PARAMETER
			{
				name = ReachState
				type = ReachState
	
				targetBody = HomeWorld()
				situation = FLYING
				minAltitude = @/AltMin
				maxAltitude = @/AltMax
	
				disableOnStateChange = false
				hideChildren = true
				hidden = true
	
			}
	
			completeInSequence = false
			disableOnStateChange = false
			hideChildren = true
	
		}
	
		PARAMETER
		{
			name = VesselParameterGroup
			type = VesselParameterGroup
			title = fly faster than @/PrettySpeed
	
			vessel = @/craft
	
			PARAMETER
			{
				name = ReachState
				type = ReachState
	
				targetBody = HomeWorld()
				situation = FLYING
				minSpeed = @/Speed
	
				disableOnStateChange = false
				hideChildren = true
				hidden = true
	
			}
	
			completeInSequence = false
			disableOnStateChange = false
			hideChildren = true
	
		}
	
		PARAMETER
		{
			name = VesselParameterGroup
			type = VesselParameterGroup
			title = with less than 10 m/s of vertical speed
	
			vessel = @/craft
	
			PARAMETER
			{
				name = ReachState
				type = ReachState
	
				targetBody = HomeWorld()
				situation = FLYING
				minRateOfClimb = -10
				maxRateOfClimb = 10
	
				disableOnStateChange = false
				hideChildren = true
				hidden = true
	
			}
	
			completeInSequence = true
			disableOnStateChange = false
			hideChildren = true
	
		}
	
		PARAMETER
		{
			name = Duration
			type = Duration
	
			duration = 5s
			preWaitText = and hold for:
			waitingText = and hold for: 
			completionText = You did it!
	
			completeInSequence = true
			disableOnStateChange = false
	
		}
	
	
		completeInSequence = true
		disableOnStateChange = true
	
	}

//Recovery Parameter - Landing
	PARAMETER
	{
		name = Any
		type = Any
		title = and then land and stop

		PARAMETER
		{
			name = Any
			type = Any
			title = at one of the following recovery areas

			PARAMETER
			{
				name = VesselParameterGroup
				type = VesselParameterGroup
				title = the KSC Runway

				vessel = @/craft

			PARAMETER
				{
					name = ReachState
					type = ReachState

					targetBody = HomeWorld()
					biome = Runway
					situation = LANDED
					maxSpeed = 0.0

					disableOnStateChange = false
					hideChildren = true

				}

				disableOnStateChange = false
				hideChildren = true		

			}

			PARAMETER
			{
				name = VesselParameterGroup
				type = VesselParameterGroup
				title = or the Spaceplane Hangar Air Terminal

				vessel = @/craft

			PARAMETER
				{
					name = ReachState
					type = ReachState

					targetBody = HomeWorld()
					biome = SPH
					situation = LANDED
					maxSpeed = 0.0

					disableOnStateChange = false
					hideChildren = true

				}

				disableOnStateChange = false
				hideChildren = true		

			}

			disableOnStateChange = false

		}

		completeInSequence = true
		disableOnStateChange = false

	}

//Recovery Parameter - Craft & Kerbal Safety Check
	PARAMETER
	{
		name = All
		type = All
		title = safely

		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying your aircraft

			vessel = @/craft

		}

		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = or killing anyone

			vessel = @/craft

		}

		completeInSequence = true
		disableOnStateChange = true
	}
}