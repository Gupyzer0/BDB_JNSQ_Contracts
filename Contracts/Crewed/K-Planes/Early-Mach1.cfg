CONTRACT_TYPE
{
	name = Early-Mach1
	group = CrewedRecords
	
	title = Achieve an airspeed of @/PrettySpeed.
	description = Our aerospace chief scientist Mach Kerman, and KSP retired test pilot Yeager Kerman, want to push us toward developing a spaceplane. But before this can happen, Inigma Kerman says they need to master supersonic flight, and to do this, he is asking your organization to design a plane that can break through the sound barrier in level flight at an @/PrettyAltRange.\n\nAlthough not required to complete this challenge, Mach Kerman believes that if you design an airplane to use one of the new liquid fueled rocket engines being developed for use by the space program, might make this attempt easier to accomplish.
	synopsis = Launch an airplane from the runway, fly with an @/PrettyAltRange, exceed @/PrettySpeed in level flight for 5 seconds, and then land back at KSC safely.
	genericTitle = Reach Mach 1
	genericDescription = We want you to set a new crewed speed record breaking the sound barrier.
	completedMessage = You have broken the sound barrier and achieved the amazing speed of Mach 1!
	
	autoAccept = true
	cancellable = true
	declinable = false
	
	targetBody = HomeWorld()

	// Can only have one active
	maxSimultaneous = 1

	// Contract rewards

	prestige = Exceptional
	advanceFunds = @rewardReputation * @SpacelinesContracts:KerbucksExceptional
	rewardFunds = @advanceFunds * @SpacelinesContracts:KerbucksRewardExceptional
	failureFunds = @advanceFunds * 1.1
	rewardReputation = 25
	failureReputation = @rewardReputation * 0.5 // was @rewardReputation

	DATA
	{
		type = string
		craft = KPlanesMach1
	}

	DATA
	{
		type = double
		AltMin = Round(@SpacelinesContracts:TroposphereLow * 1000.0)
		ScaledAltMin = Round(@/AltMin / 1000.0)
		title = Minimum altitude
	}

	DATA
	{
		type = string
		DescAltMin = " (Troposphere Low)"
		title = Minimum altitude
	}

	DATA
	{
		type = string
		PrettyAltMin = @/ScaledAltMin.ToString("#,# km")
		title = Minimum altitude
	}

	DATA
	{
		type = double
		AltMax = Round(@SpacelinesContracts:StratosphereHigh * 1000.0)
		ScaledAltMax = Round(@/AltMax / 1000.0)
		title = Maximum altitude
	}

	DATA
	{
		type = string
		DescAltMax = " (Stratosphere High)"
		title = Maximum altitude
	}

	DATA
	{
		type = string
		PrettyAltMax = @/ScaledAltMax.ToString("#,# km")
		title = Maximum altitude
	}

	DATA
	{
		type = string
		PrettyAltRange = altitude between @/PrettyAltMin@/DescAltMin and @/PrettyAltMax@/DescAltMax
		title = Range for altitude 
	}

	DATA
	{
		type = double
		Speed = Round(@SpacelinesContracts:Mach1 * 1.0)
		ScaledSpeed = Round(@/Speed / 1.0)
		title = Speed
	}

	DATA
	{
		type = string
		DescSpeed = " (Mach1)"
		title = Speed
	}

	DATA
	{
		type = string
		PrettySpeed = @/ScaledSpeed.ToString("#,# m/s")
		title = Speed
	}

	DATA
	{
		type = string
		PrettySpeedRange = speed of at least @/PrettySpeed@/DescSpeed
		title = Range for speed 
	}

	//-----------------------
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = Your aircraft must

		define = @/craft
		dissassociateVesselsOnContractCompletion = true

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = have a certified pilot

			trait = Pilot
			minCrew = 1

			disableOnStateChange = false
			hideChildren = true

		}

		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = have wings

			category = Aero

			disableOnStateChange = false
			hideChildren = true

		}

		PARAMETER
		{
			name = All
			type = All
			title = have air breathing engines and/or rockets

			PARAMETER
			{
				name = PartValidation
				type = PartValidation
				title = not have any solid rocket engines

				NONE
				{
					MODULE
					{
						EngineType = SolidBooster
					}
				}

				disableOnStateChange = false
				hideChildren = true
			}
			disableOnStateChange = false
		}
		disableOnStateChange = false
	}

	// Objective
	PARAMETER
	{
		name = All
		type = All
		title = achieve a maximum airspeed of @/PrettySpeed

		PARAMETER
		{
			name = VesselParameterGroup
			type = VesselParameterGroup
			title = fly at an @/PrettyAltRange
	
			vessel = @/craft
	
			PARAMETER
			{
				name = ReachState
				type = ReachState
	
				targetBody = HomeWorld()
				situation = FLYING
				minAltitude = @/AltMin
				maxAltitude = @/AltMax
	
				disableOnStateChange = false
				hideChildren = true
				hidden = true
	
			}
	
			completeInSequence = false
			disableOnStateChange = false
			hideChildren = true
	
		}
	
		PARAMETER
		{
			name = VesselParameterGroup
			type = VesselParameterGroup
			title = fly faster than @/PrettySpeed
	
			vessel = @/craft
	
			PARAMETER
			{
				name = ReachState
				type = ReachState
	
				targetBody = HomeWorld()
				situation = FLYING
				minSpeed = @/Speed
	
				disableOnStateChange = false
				hideChildren = true
				hidden = true
	
			}
	
			completeInSequence = false
			disableOnStateChange = false
			hideChildren = true
	
		}
	
		PARAMETER
		{
			name = VesselParameterGroup
			type = VesselParameterGroup
			title = with less than 10 m/s of vertical speed
	
			vessel = @/craft
	
			PARAMETER
			{
				name = ReachState
				type = ReachState
	
				targetBody = HomeWorld()
				situation = FLYING
				minRateOfClimb = -10
				maxRateOfClimb = 10
	
				disableOnStateChange = false
				hideChildren = true
				hidden = true
	
			}
	
			completeInSequence = true
			disableOnStateChange = false
			hideChildren = true
	
		}
	
		PARAMETER
		{
			name = Duration
			type = Duration
	
			duration = 5s
			preWaitText = and hold for:
			waitingText = and hold for: 
			completionText = You did it!
	
			completeInSequence = true
			disableOnStateChange = false
	
		}
		completeInSequence = true
		disableOnStateChange = true
	}

	// Landing
	PARAMETER
	{
		name = Any
		type = Any
		title = and then land and stop

		PARAMETER
		{
			name = Any
			type = Any
			title = at one of the following recovery areas

			PARAMETER
			{
				name = VesselParameterGroup
				type = VesselParameterGroup
				title = the KSC Runway

				vessel = @/craft

				PARAMETER
				{
					name = ReachState
					type = ReachState

					targetBody = HomeWorld()
					biome = Runway
					situation = LANDED
					maxSpeed = 0.0

					disableOnStateChange = false
					hideChildren = true

				}

				disableOnStateChange = false
				hideChildren = true		

			}

			PARAMETER
			{
				name = VesselParameterGroup
				type = VesselParameterGroup
				title = or the Spaceplane Hangar Air Terminal

				vessel = @/craft

				PARAMETER
				{
					name = ReachState
					type = ReachState

					targetBody = HomeWorld()
					biome = SPH
					situation = LANDED
					maxSpeed = 0.0

					disableOnStateChange = false
					hideChildren = true

				}

				disableOnStateChange = false
				hideChildren = true		

			}
			disableOnStateChange = false
		}
		completeInSequence = true
		disableOnStateChange = false
	}

	// Checking crew safety
	PARAMETER
	{
		name = All
		type = All
		title = safely

		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying your aircraft

			vessel = @/craft

		}

		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = or killing anyone

			vessel = @/craft
		}
		completeInSequence = true
		disableOnStateChange = true
	}
}