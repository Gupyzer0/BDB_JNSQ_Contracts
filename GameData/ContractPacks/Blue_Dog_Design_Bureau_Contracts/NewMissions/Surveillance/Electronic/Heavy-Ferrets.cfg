CONTRACT_TYPE
{
    name = HeavyFerret
    group = HeavyFerrets
	title = Program 102: Perform ELINT/SIGINT reconnaissance.

	description = Air Force Program 102 refers to a series of SIGINT reconnaissance satellites launched and operated by the United States Air Force and National Reconnaissance Office during the 1960s. The intercepted data and their location were stored on magnetic tape, and subsequently transmitted to tracking and acquisition ground stations. 
    synopsis = Launch a "Heavy Ferret" satellite into polar orbit of @targetBody and perform ELINT/SIGINT recon of the specified areas.

    completedMessage = Mission Success!

    agent = nro 
    maxSimultaneous = 1
	maxCompletions = 12 // 3 Launches except Strawman 4
    deadline = 90
	minExpiry = 1
	maxExpiry = 1

    prestige = Trivial       // 1.0x
	advanceFunds = Random(@Blue_Dog_Design_Bureau_Contracts:Kerbucks05,@Blue_Dog_Design_Bureau_Contracts:Kerbucks075)
	rewardFunds = Random(@Blue_Dog_Design_Bureau_Contracts:Kerbucks1,@Blue_Dog_Design_Bureau_Contracts:Kerbucks105)
	rewardScience = 0
	failureFunds = @advanceFunds + 5000
    rewardReputation = 0
	failureReputation = 0

    targetBody = HomeWorld()
	
    // Hardcoded list of specific experiments
    DATA
    {
        name = experimentslist
		title = experimentslist
		type = List<ScienceExperiment>
        hidden = true

        experiments = [bd_SIGINT]
    }
	
	// Randomly select 1 valid biome to study from low space.
    DATA
    {
		type = List<ScienceSubject>
        hidden = true

        scienceSubjectsTemp1 = AllScienceSubjectsByBodyExperiment([@targetBody], @experiments)
		scienceSubjectsTemp2 = @scienceSubjectsTemp1.Where(s => !s.Biome().IsKSC())
		scienceSubjectsTemp3 = @scienceSubjectsTemp2.Where(s => s.Situation() == InSpaceLow)
        scienceSubjects = @scienceSubjectsTemp3.Random(1)
    }

    REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = Corona_KH4
		minCount = 1
		cooldownDuration = 0d
	}
	
	PARAMETER
    {
        name = Heavy Ferret Satellite
        type = VesselParameterGroup
        title = Launch a new Heavy Ferret satellite
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			title = The satellite must be a new vessel
		}
		
		PARAMETER
		{
			name = Crewmembers
			type = HasCrew
			minCrew = 0
			maxCrew = 0
		}

        PARAMETER
        {
            name = All
            type = All
            title = Needs to be an Agena B/D based satellite

            PARAMETER
            {
                name = PartValidation
                type = PartValidation
                title = Requires an XLR81 Engine

                part = bluedog_Agena_Engine_XLR81
            }

            PARAMETER
            {
                name = PartValidation
                type = PartValidation
                title = Requires an Agena Tank

                part = bluedog_Agena_Tank_Long
            }
        }

        PARAMETER
		{
            name = PartValidation
			type = PartValidation
            title = Needs antennas able to perform SIGINT

            MODULE
            {
                name = ModuleScienceExperiment

                label = Experiment
                experimentID = bd_SIGINT
            }
		}

        // Orbit
        PARAMETER
		{
			name = Orbit
			type = Orbit
			title = Achieve the specified polar low space orbit
			
			maxApA = Random(0.4,0.5) * @targetBody.SpaceAltitudeThreshold()
			maxPeA = (Random(0.3,0.4) * @targetBody.SpaceAltitudeThreshold()) < @targetBody.AtmosphereAltitude() ? @targetBody.AtmosphereAltitude() :  (Random(0.3,0.4) * @targetBody.SpaceAltitudeThreshold())
			maxEccentricity = 0.1
			minInclination = Random(70,85)
			maxInclination = Random(90,105)
			disableOnStateChange = true
		}
	}

    PARAMETER
	{
		name = CollectScience
		type = CollectScience

		title = Activate the antennas in the specific area
		biome = @scienceSubject.Biome()
		situation = @scienceSubject.Situation()
		experiment = @scienceSubject.Experiment()
		recoveryMethod = Transmit

		ITERATOR
		{
			type = ScienceSubject
			scienceSubject = @/scienceSubjects
		}
	}

   	
	
}
