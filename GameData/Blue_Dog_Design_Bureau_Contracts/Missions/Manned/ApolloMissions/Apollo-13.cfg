CONTRACT_TYPE
{
    name = Apollo-13
    group = ApolloMission
    title = Apollo-13
	
	description = Apollo 13 is the seventh crewed mission in the Apollo space program. Your objective is to make the first crewed landing on Minmus.
	
    notes = Apollo 13 was launched by a Saturn 5 on April 11, 1970 from the Cape Canaveral launch site.
    synopsis = <color=yellow>Perform the eighth flight of the Apollo Program, performing a landing on @targetBody and returning home, while having the S-IVB-13 stage impact @targetBody.</color>
    completedMessage = Mission Complete
	
    agent = nasa
	minExpiry = 0
	maxExpiry = 0
	prestige = Exceptional
	cancellable = false
	declinable = false
	maxCompletions = 1
	maxSimultaneous = 1 
	
	rewardScience = 15
	rewardReputation = 20
	rewardFunds = @Blue_Dog_Design_Bureau_Contracts:Kerbucks5
	advanceFunds = @Blue_Dog_Design_Bureau_Contracts:Kerbucks5
	
	targetBody = HomeWorld().Children().Last()

	PARAMETER
	{
		name = Apollo-13
		type = VesselParameterGroup
		title = Launch Apollo-13 to Minmus
		define = Apollo-13

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 3
			maxCrew = 3
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = S-IVB-13
        }

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = LM-13
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_LES
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_CrewPod
			disableOnStateChange = True
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = Must have a docking port
			
			partModule = ModuleDockingNode
		}
		// /Required Parts ---------------------------------
		
		PARAMETER
		{
			name = OrbitB
			type = Orbit
			targetBody = HomeWorld().Children().Last()
			maxAltitude = 30000
			maxEccentricity = 0.01
			title = Then establish a circular orbit around @targetBody
			disableOnStateChange = true
		}

		PARAMETER
		{    
			name = Docking    
			type = Docking    
			vessel = LM-13
			disableOnStateChange = true
			completeInSequence = true
			title = Dock with the Lunar Module after it has completed its mission
		}
	}

	PARAMETER
	{
		name = LM-13
		type = VesselParameterGroup
		title = Separate the LM from Apollo-13 in Minmus orbit and land it.
		define = LM-13

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 0
			maxCrew = 2
			title = The LM must be crewed after launch to be able to perform its mission
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = Apollo-13
        }

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = S-IVB-13
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_LM_Ascent_Cockpit
			disableOnStateChange = True
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = Must have a docking port
			partModule = ModuleDockingNode
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------
		
		PARAMETER
		{
			name = ReachState
			type = ReachState
			targetBody = HomeWorld().Children().Last()
			situation = LANDED
			disableOnStateChange = true
		}
	}

	PARAMETER
	{
		name = S-IVB-13
		type = VesselParameterGroup
		title = Launch S-IVB-13 to an impact of Minmus
		define = S-IVB-13

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 0
			maxCrew = 0
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = Apollo-13
        }

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = LM-13
        }
		
		PARAMETER
		{
			name = VesselDestroyed
			type = VesselDestroyed
			mustImpactTerrain = true
			title = Impact @targetBody
			targetBody = HomeWorld().Children().Last()
		}
	}

	PARAMETER
	{
		name = CollectScienceA
		type = CollectScience
		targetBody = HomeWorld().Children().First()
		situation = SrfLanded
		experiment = [crewReport, evaReport, surfaceSample]
		recoveryMethod = Ideal
		title = Report the crew's findings from the surface and take a sample
		disableOnStateChange = true
	}
		
	PARAMETER
	{
		name = CollectScienceB
		type = CollectScience
		targetBody = HomeWorld().Children().Last()
		situation = SrfLanded
		recoveryMethod = Transmit
		experiment = bd_camera
		title = Perform a TV broadcast from the lunar surface
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = PlantFlag
		type = PlantFlag
		targetBody = HomeWorld().Children().Last()
		title = Plant a flag on the surface of @targetBody
	}

	PARAMETER
	{
		name = ReturnHome
		type = ReturnHome
		title = Return Apollo-13 home safely
		completeInSequence = true
	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = Apollo-12
		minCount = 1
		maxCount = 1
		cooldownDuration = 0d
	}
}