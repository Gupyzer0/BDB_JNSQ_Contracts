CONTRACT_TYPE
{
    name = Apollo-Soyuz
    group = ApolloMission
    title = Apollo-Soyuz
	
	description = The Apollo-Soyuz Test Project (ASTP) is a joint effort by the Kerbal States and the Union of Socialist Krusisan Republics for the docking of an Apollo command and service module (CSM) with a Soviet Soyuz 7K-TM spacecraft.
	
    notes = Apollo ASTP was launched by a Saturn 1B on July 15, 1975 from the Cape Canaveral launch site.
    synopsis = <color=yellow>Launch an Apollo spacecraft and dock with Soyuz 19.</color>
    completedMessage = Mission Complete
	
    agent = nasa
	minExpiry = 0
	maxExpiry = 0
	prestige = Significant
	cancellable = false
	declinable = false
	maxCompletions = 1
	maxSimultaneous = 1 
	
	rewardScience = 10
	rewardReputation = 15
	rewardFunds = @Blue_Dog_Design_Bureau_Contracts:Kerbucks1
	advanceFunds = @Blue_Dog_Design_Bureau_Contracts:Kerbucks3

	PARAMETER
	{
		name = Apollo-ASTP
		type = VesselParameterGroup
		title = Launch the Apollo-ASTP command module in orbit towards Soyuz-19
		define = Apollo-ASTP

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 3
			maxCrew = 3
		}

		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_LES
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_CrewPod
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_APAS75
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_ASTP_Antenna
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_ASTP_DockingAdapter
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_ASTP_UltravioletExperiment
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_DopplerAntenna
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------

		PARAMETER
		{
			name = Sequence
			type = Sequence
			
			PARAMETER
			{
				name = Orbit
				type = Orbit
				targetBody = HomeWorld()
				minApA = 90000
				disableOnStateChange = true
			}

			PARAMETER
			{
				name = Docking
				type = Docking
				vessel = Soyuz-19
				title = Dock with Soyuz-19, exchange formalities and perform some solar research
				disableOnStateChange = true
			}
			
			PARAMETER
			{
				name = CollectScience
				type = CollectScience
				situation = InSpaceLow
				experiment = crewReport
				recoveryMethod = Transmit
				title = Speak to both the KSS president and the Soviet Premier
				disableOnStateChange = true
			}
			
			PARAMETER
			{
				name = Rendezvous
				type = Rendezvous
				vessel = Soyuz-19
				distance = 200
				disableOnStateChange = true
				title = Undock and maneuver close by
			}
		
			PARAMETER
			{
				name = Docking
				type = Docking
				vessel = Soyuz-19
				title = Perform another docking maneuver
				disableOnStateChange = true
			}
		}
	}

	BEHAVIOUR
	{
		name = SpawnSoyuz19
		type = SpawnVessel
		deferVesselCreation = false

		VESSEL
		{
	
			name = Soyuz-19
			craftURL = Blue_Dog_Design_Bureau_Contracts/Crafts/SoyuzTMA.craft
			vesselType = Ship
			owned = false
			targetBody = Kerbin

			ORBIT
			{
				SMA = 1731400
				ECC = 0,00098
				INC = 51.8
				LPE = 0
				LAN = 0
				MNA = 0
				EPH = UniversalTime()
				REF = 1
			}

			CREW
			{
				addToRoster = false
				count = 2
			}
		}
	}

	PARAMETER
	{
		name = CollectScience
		type = CollectScience
		situation = InSpaceLow
		recoveryMethod = RecoverOrTransmit
		experiment = bd_UVspec
		title = Perform the UV Absorbtion Experiment
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = ReturnHome
		type = ReturnHome
		title = Return the Apollo crew home safely after the exchange
		disableOnStateChange = true
		
		PARAMETER
		{
			name = IsNotVessel
			type = IsNotVessel
			vessel = Soyuz-19
			hidden = true
		}
	}
	
	PARAMETER
	{
		name = ReturnHome
		type = ReturnHome
		title = Return Soyuz-19 home safely
		disableOnStateChange = true
		
		PARAMETER
		{
			name = IsNotVessel
			type = IsNotVessel
			vessel = Apollo-ASTP
			hidden = true
		}
	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = Skylab-4
		minCount = 1
		maxCount = 1
		cooldownDuration = 1d
	}
}