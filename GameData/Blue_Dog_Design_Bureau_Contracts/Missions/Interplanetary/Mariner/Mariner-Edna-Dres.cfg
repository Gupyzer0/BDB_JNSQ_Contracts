CONTRACT_TYPE
{
    name = Mariner-Edna-Dres
	group = MarinerMission
	title = Mariner Edna-Dres

	description = The Mariner Edna-Dres mission is an extension to the base Mariner program for exploring Edna and Dres.

	synopsis = <color=yellow>Launch the Mariner spacecraft and flyby @/targetBody1 and @/targetBody2.</color>
	completedMessage = Mission Success!

	agent = nasa
	minExpiry = 0
	maxExpiry = 0
	prestige = Significant
	cancellable = true
	declinable = true
	maxCompletions = 1
	maxSimultaneous = 1

	rewardScience = 10
	rewardReputation = 5
	rewardFunds = @Blue_Dog_Design_Bureau_Contracts:Kerbucks1
	advanceFunds = @Blue_Dog_Design_Bureau_Contracts:Kerbucks1

    targetBody = @/targetBody2

    DATA
    {
		title = target
		type = CelestialBody
		requiredValue = true
		
        targetBody1 = HomeWorld().Parent().Children().ElementAt(4) // Edna
    }
	
    DATA
    {
		title = target2
		type = CelestialBody
		requiredValue = true
		
        targetBody2 = HomeWorld().Parent().Children().ElementAt(5) // Dres
    }
    
    PARAMETER
	{
        name = Mariner-Edna-Dres
        type = VesselParameterGroup
        title = Launch the Mariner Edna Dres spacecraft
        define = Mariner-Edna-Dres

		PARAMETER 
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER
		{
			name = Crewmembers
			type = HasCrew
			minCrew = 0
			maxCrew = 0
		}

		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_MarinerB_Bus
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------
	}
	
	PARAMETER
	{
        name = MarinerEdna
        type = VesselParameterGroup
        title = Flyby @/targetBody1 and do measurements
        vessel = Mariner-Edna-Dres
		
		PARAMETER
		{	
			name = Sequence
			type = Sequence
			
			PARAMETER
			{   
				name = Orbit2
				type = Orbit
				targetBody = @/targetBody1
				minInclination = 0
				situation = ESCAPING
				maxPeA = @targetBody.SpaceAltitudeThreshold()
				title = Perform a flyby of @targetBody
				disableOnStateChange = true
			}
			
			PARAMETER
			{
				name = CollectScienceA
				type = CollectScience

				targetBody = @/targetBody1
				location = Space
				recoveryMethod = Transmit
				title = Transmit science data of @targetBody
				disableOnStateChange = true
			}
		}
	}

	PARAMETER
	{
        name = MarinerDres
        type = VesselParameterGroup
        title = Flyby @/targetBody2 and do measurements
        vessel = Mariner-Edna-Dres
		
		PARAMETER
		{	
			name = Sequence2
			type = Sequence
			
			PARAMETER
			{   
				name = Orbit3
				type = Orbit
				targetBody = @/targetBody
				minInclination = 0
				situation = ESCAPING
				maxPeA = @targetBody.SpaceAltitudeThreshold()
				title = Perform a flyby of @targetBody
				disableOnStateChange = true
			}
		
			PARAMETER
			{
				name = CollectScienceB
				type = CollectScience

				targetBody = @/targetBody
				location = Space
				recoveryMethod = Transmit
				title = Transmit science data of @targetBody
				disableOnStateChange = true
			}
		}
	}
	
	REQUIREMENT
	{
        name = CompleteContract
        type = CompleteContract
        contractType = Mariner-10
        minCount =1
        maxCount =1
        cooldownDuration = 0d
	}
}