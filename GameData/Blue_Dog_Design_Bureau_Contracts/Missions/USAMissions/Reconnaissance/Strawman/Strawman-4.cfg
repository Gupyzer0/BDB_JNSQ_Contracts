CONTRACT_TYPE
{
    name = Strawman-4
    group = StrawmanMissions
	title = Perform ELINT/SIGINT reconnaissance using a Strawman satellite using a Harvester antenna.
    genericTitle = Perform ELINT/SIGINT reconnaissance.

	description = The Strawman series of ELINT/SIGINT satellites, known for decades only as "Heavy Ferrets", are the fourth variation of Agena-based ELINT satellites. These satellites were designed to detect, map and investigate SAM and ABM radars.
    genericDescription = Perform ELINT/SIGINT recon using a Strawman satellite.
	
    synopsis = <color=yellow>Launch a Strawman "Heavy Ferret" satellite with a "Harvester antenna" into polar orbit of @targetBody and perform ELINT/SIGINT recon of the specified areas.</color>
	notes = Suggested Launcher: Thorad-SLV-2G/H.
    completedMessage = Now we have some good intel about the new SA-5 sites locations.

    agent = nro 
    maxSimultaneous = 1
    targetBody = HomeWorld()
	maxCompletions = 1
    deadline = 90
	minExpiry = 90
	maxExpiry = 90
	advanceFunds = Random(@Blue_Dog_Design_Bureau_Contracts:Kerbucks05,@Blue_Dog_Design_Bureau_Contracts:Kerbucks075)
    rewardFunds = Random(@Blue_Dog_Design_Bureau_Contracts:Kerbucks1,@Blue_Dog_Design_Bureau_Contracts:Kerbucks105)
    rewardReputation = Random(4.0, 8.0)
	
    // Hardcoded list of specific experiments
    DATA
    {
        name = experimentslist
		title = experimentslist
		type = List<ScienceExperiment>
        hidden = true

        experiments = [bd_SIGINT]
    }
	
	// Randomly select 1 valid biome to study from low space.
    DATA
    {
		type = List<ScienceSubject>
        hidden = true

        scienceSubjectsTemp1 = AllScienceSubjectsByBodyExperiment([@targetBody], @experiments)
		scienceSubjectsTemp2 = @scienceSubjectsTemp1.Where(s => !s.Biome().IsKSC())
		scienceSubjectsTemp3 = @scienceSubjectsTemp2.Where(s => s.Situation() == InSpaceLow)
        scienceSubjects = @scienceSubjectsTemp3.Random(1)
    }
	
	PARAMETER
    {
        name = Strawman-4 SIGINT Satellite
        type = VesselParameterGroup
        title = Launch a new Strawman SIGINT satellite with a Harvester antenna.
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			title = The satellite must be a new vessel
		}
		
		PARAMETER
		{
			name = Crewmembers
			type = HasCrew
			minCrew = 0
			maxCrew = 0
		}

		// Part validation
		PARAMETER
		{
			name = PartValidation
			type = PartValidation

			// Thresher
			VALIDATE
			{
				part = bluedog_Strawman_Thresher
				minCount = 1
			}

			// Reaper
			VALIDATE
			{
				part = bluedog_Strawman_Reaper
				minCount = 1
			}

			// Strawman Bus 
			VALIDATE
			{
				part = bluedog_Strawman_Bus
				minCount = 1
			}

			// Harvester antenna
			VALIDATE
			{
				part = bluedog_Strawman_Harvester
				minCount = 1
			}
		}

        // Orbit
        PARAMETER
		{
			name = Orbit
			type = Orbit
			title = Achieve the specified polar low space orbit
			
			maxApA = Random(0.4,0.5) * @targetBody.SpaceAltitudeThreshold()
			maxPeA = (Random(0.3,0.4) * @targetBody.SpaceAltitudeThreshold()) < @targetBody.AtmosphereAltitude() ? @targetBody.AtmosphereAltitude() :  (Random(0.3,0.4) * @targetBody.SpaceAltitudeThreshold())
			maxEccentricity = 0.1
			minInclination = Random(70,85)
			maxInclination = Random(90,105)
			disableOnStateChange = true
		}
	}

    PARAMETER
	{
		name = CollectScience
		type = CollectScience

		title = Activate the antennas in the specific area
		biome = @scienceSubject.Biome()
		situation = @scienceSubject.Situation()
		experiment = @scienceSubject.Experiment()
		recoveryMethod = Transmit

		ITERATOR
		{
			type = ScienceSubject
			scienceSubject = @/scienceSubjects
		}
	}

    REQUIREMENT
    {
		name = Any
		type = Any

        // Requires Strawman parts unlocked
        REQUIREMENT
        {
            name = TechResearched
            type = TechResearched

            tech = spaceExploration
            tech = advExploration
        }

        REQUIREMENT
        {
            name = CompleteContract
            type = CompleteContract
            contractType = StrawmanMissions
            minCount = 3
            cooldownDuration = 0d
        }
    }
}
