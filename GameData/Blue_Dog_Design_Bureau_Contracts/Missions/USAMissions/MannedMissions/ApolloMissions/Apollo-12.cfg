CONTRACT_TYPE
{
    name = Apollo-12
    group = ApolloMission
    title = Apollo-12
	
	description = Apollo 12 is the sixth crewed flight in the United States Apollo program and the second mission with the objective to land on the Mun next nearby the Surveyor 3 spacecraft which had landed a couple of years ago.
	
    notes = Apollo 12 was launched by a Saturn 5 on November 14, 1969 from the Cape Canaveral launch site.
    synopsis = <color=yellow>Perform the seventh flight of the Apollo Program, land near Surveyor 3 on the Mun and return. Leave a seismometer on the surface for a future missions.</color>
    completedMessage = Mission Complete
    
    agent = nasa
	minExpiry = 0
	maxExpiry = 0
	prestige = trivial
	cancellable = false
	declinable = false
	maxCompletions = 1
	maxSimultaneous = 1 
	rewardScience = 5
	rewardReputation = 15
	rewardFunds = 150000
	failureFunds = 50000
	advanceFunds = 60000

	targetBody = HomeWorld().Children().First()

	DATA
    {
        type = Vessel
        requiredValue = true
		uniquenessCheck = CONTRACT_ACTIVE
        targetVessel = Vessel(Surveyor-3)
		title = Surveyor-3 must be an active vessel on the surface
    }
	
	DATA
	{
        type = Location
		vesselLocation = @/targetVessel.Location()
		hidden = true
    }
	
	BEHAVIOUR
    {
        name = WaypointGenerator
		type = WaypointGenerator
		
		WAYPOINT
        {    
			name = Surveyor-3 landing site
		    targetBody = @/targetBody
			icon = marker
			altitude = 0.0
			latitude = @/vesselLocation.Latitude()
			longitude = @/vesselLocation.Longitude()
        }
    }
	
	PARAMETER
	{
		name = Apollo-12
		type = VesselParameterGroup
		title = Launch Apollo-12 to the Mun
		define = Apollo-12

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 1
			maxCrew = 3
			title = Take along 3 crew members.
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = LM-12
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_LES
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_CrewPod
			disableOnStateChange = True
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = Must have a docking port
			
			partModule = ModuleDockingNode
		}
		// /Required Parts ---------------------------------
		
		PARAMETER
		{
			name = OrbitB
			type = Orbit
			targetBody = HomeWorld().Children().First()
			maxAltitude = 30000
			maxEccentricity = 0.02
			title = Then establish a near-circular orbit around @targetBody
			disableOnStateChange = true
		}

		PARAMETER
		{    
			name = Docking    
			type = Docking    
			vessel = LM-12
			disableOnStateChange = true
			completeInSequence = true
			title = Dock with the Lunar Module after it has completed its mission
		}
	}

	PARAMETER
	{
		name = LM-12
		type = VesselParameterGroup
		title = Separate the LM from Apollo-12 in lunar orbit, land it near Surveyor-3 and return
		define = LM-12

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 0
			maxCrew = 2
			title = The LM must be crewed after launch to be able to perform its mission
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = Apollo-12
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_LM_Ascent_Cockpit
			disableOnStateChange = True
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = Must have a docking port
			partModule = ModuleDockingNode
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------
		
		PARAMETER
		{
			name = ReachState
			type = ReachState
			targetBody = HomeWorld().Children().First()
			situation = LANDED
			disableOnStateChange = true
		}
		
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 1000.0
			title = Land near Surveyor-3
		}
	}
	
	PARAMETER
	{
		name = CollectScienceA
		type = CollectScience
		targetBody = HomeWorld().Children().First()
		situation = SrfLanded
		experiment = crewReport
		experiment = evaReport
		experiment = surfaceSample
		recoveryMethod = Ideal
		title = Report the crew's findings from the surface and take a sample. Leave a seismometer on the surface for a future missions
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = CollectScienceB
		type = CollectScience
		targetBody = HomeWorld().Children().First()
		situation = SrfLanded
		recoveryMethod = Recover
		experiment = [bd_camera, mobileMaterialsLab, mysteryGoo]
		title = Recover various additional photos and materials samples of the lunar surface, including the SNAP-27 RTG goo residue.
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = PlantFlag
		type = PlantFlag
		targetBody = HomeWorld().Children().First()
		title = Plant a flag on the surface of @targetBody
	}

	PARAMETER
	{
		name = ReturnHome
		type = ReturnHome
		title = Return Apollo-12 home safely
	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = Apollo-11
		minCount = 1
		maxCount = 1
		cooldownDuration = 0d
	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = Surveyor-3
		minCount = 1
		maxCount = 1
		cooldownDuration = 0d
	}
}