CONTRACT_TYPE
{
    name = Apollo-15
    group = ApolloMission
    title = Apollo-15
	
	description = Apollo 15 is the ninth crewed mission in the Apollo program. It's the first of the "type J mission" so the CMS includes the Scientific Instrument Module (SIM) bay for performing various experiments on Munar orbit,  a Particles and fields Subsatellite (PFS) also to be deployed on Muanr orbit, and the Lunar Rover.
	
    notes = Apollo 15 was launched by a Saturn 5 on July 26, 1971 from the Cape Canaveral launch site.
    synopsis = <color=yellow>Perform the tenth flight of the Apollo Program, landing on the Mun, performing the required experiments around Munar orbit and returning home.</color>
    completedMessage = Mission Complete.

    agent = nasa
	minExpiry = 90
	maxExpiry = 90
	prestige = trivial
	cancellable = false
	declinable = false
	maxCompletions = 1
	maxSimultaneous = 1 
	rewardScience = 5
	rewardReputation = 10
	rewardFunds = 120000
	failureFunds = 50000
	advanceFunds = 60000

	targetBody = HomeWorld().Children().First()

	BEHAVIOUR
	{
		name = WaypointGenerator
		type = WaypointGenerator

		RANDOM_WAYPOINT
		{
			name = Apollo-15 Landing Site
			hidden = False
			targetBody = HomeWorld().Children().First()
			count = 1
			icon = marker
			altitude = 0.0
			waterAllowed = false
			forceEquatorial = false
		}
	}

	PARAMETER
	{
		name = Apollo-15
		type = VesselParameterGroup
		title = Launch Apollo-15 to the Moon
		define = Apollo-15

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 1
			maxCrew = 3
			title = Take along 3 crew members.
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = LM-15
        }
		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = PFS-1
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_CrewPod
			disableOnStateChange = True
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = Must have a docking port
			partModule = ModuleDockingNode
			disableOnStateChange = True
		}
		// SIM bay experiments
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_mappingCamera
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_PanoramicCamera
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_subSatellite_dispenser
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_GRS
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_MasSpec
			disableOnStateChange = True
		}
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_alphaXraySpectrometer
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------

		PARAMETER
		{
			name = OrbitB
			type = Orbit
			targetBody = HomeWorld().Children().First()
			minAltitude = 30000
			maxAltitude = 45000
			minEccentricity = 0.05
			title = Then establish an elliptical orbit around @targetBody
			disableOnStateChange = true
		}

		PARAMETER
		{    
			name = Docking    
			type = Docking
			vessel = LM-15
			title = Dock with the Lunar Module after it has completed its mission
			disableOnStateChange = true
			completeInSequence = true
		}
	}

	PARAMETER
	{
		name = LM-15
		type = VesselParameterGroup
		title = Separate the LM from Apollo-15 in lunar orbit, land it near the waypoint and return
		define = LM-15

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 0
			maxCrew = 2
			title = The LM must be crewed after launch to be able to perform its mission
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = Apollo-15
        }
		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = PFS-1
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_LM_Ascent_Cockpit
			disableOnStateChange = True
		}
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = Must have a docking port
			partModule = ModuleDockingNode
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------
		
		PARAMETER
		{
			name = ReachState
			type = ReachState
			targetBody = HomeWorld().Children().First()
			situation = LANDED
			disableOnStateChange = true
		}
		
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			distance = 1000.0
			title = Land near the indicated area
		}
	}

	PARAMETER
	{
		name = PFS-1
		type = VesselParameterGroup
		title = Release the PFS-2 subsatellite into Munar orbit from Apollo-15
		define = LM-15

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			hidden = true
		}

		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew 
			minCrew = 0
			maxCrew = 0
		}

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = Apollo-15
        }

		PARAMETER
        {
            name = IsNotVessel
            type = IsNotVessel
			hidden = true
            vessel = LM-15
        }
		
		// Required Parts ---------------------------------
		PARAMETER
		{
			type = PartValidation
			part = bluedog_Apollo_SIMbay_subSatellite
			disableOnStateChange = True
		}
		// /Required Parts ---------------------------------

		PARAMETER
		{
			type = CollectScience
			targetBody = HomeWorld().Children().First()
			situation = InSpaceLow
			recoveryMethod = Transmit
			experiment = logIonTrap
			title = Study particles data from low space around @targetBody with PFS-2
			disableOnStateChange = true
		}
		
		PARAMETER
		{
			type = Orbit
			targetBody = HomeWorld().Children().First()
			minAltitude = 30000
			maxAltitude = 45000
			minEccentricity = 0.05
			disableOnStateChange = true
		}
	}
	
	PARAMETER
	{
		name = CollectScienceA
		type = CollectScience
		targetBody = HomeWorld().Children().First()
		situation = SrfLanded
		experiment = [crewReport, evaReport, surfaceSample]
		recoveryMethod = Ideal
		title = Report the crew's findings from the surface and take a sample
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = CollectScienceB
		type = CollectScience
		targetBody = HomeWorld().Children().First()
		situation = SrfLanded
		recoveryMethod = Recover
		experiment = [bd_camera, mobileMaterialsLab, bd_cosmicRay]
		title = Recover various additional photos and experimentals studied from the lunar surface
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = CollectScienceC
		type = CollectScience
		targetBody = HomeWorld().Children().First()
		situation = InSpaceLow
		recoveryMethod = Transmit
		experiment = [bd_camera, bd_UVspec, bd_microwaveSpec]
		title = Perform SIM bay experiments in lunar orbit
		disableOnStateChange = true
	}
	
	PARAMETER
	{
		name = PlantFlag
		type = PlantFlag
		targetBody = HomeWorld().Children().First()
		title = Plant a flag on the surface of @targetBody
	}

	PARAMETER
	{
		name = LM-15 Impact
		type = VesselParameterGroup
		title = After transferring all crew to the Apollo command module, separate the LM and have it impact the Moon
		vessel = LM-15
		
		PARAMETER
		{
			name = VesselDestroyed
			type = VesselDestroyed
			mustImpactTerrain = true
			title = Impact @targetBody
			targetBody = HomeWorld().Children().First()
		}
	}

	PARAMETER
	{
		name = ReturnHome
		type = ReturnHome
		title = Return Apollo-15 home safely
	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = Apollo-14
		minCount = 1
		maxCount = 1
		cooldownDuration = 0d
	}
}